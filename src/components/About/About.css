/* Refined About styles: clean, balanced, subtle effects.
   Focus on typography, spacing, responsive layout, and limited microinteractions. */

:root{
  --bg: #F8FAFC; /* subtle off-white */
  --card: #FFFFFF;
  --muted: #6B7280;
  --primary: #2563EB;
  --accent: #3B82F6;
  --glass: rgba(59,130,246,0.06);
  --soft-shadow: 0 8px 28px rgba(16,24,40,0.06);
}

/* Utilities kept from previous file but simplified */
.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}
.line-clamp-3{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}

.animate-fade-in{animation:fadeIn .5s ease both}
.animate-fade-in-up{animation:fadeInUp .55s ease both}

@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:none}}

/* Page background and containers */
.min-h-screen{background:linear-gradient(180deg,var(--bg),#EFF6FF)}
.container{max-width:1200px;margin-left:auto;margin-right:auto}

/* Card base */
.card{background:var(--card);border-radius:14px;box-shadow:var(--soft-shadow);padding:1.25rem}

/* Subtle hover / focus microinteraction */
.soft-hover{transition:transform .22s cubic-bezier(.2,.8,.2,1),box-shadow .22s ease}
.soft-hover:hover{transform:translateY(-6px);box-shadow:0 16px 36px rgba(16,24,40,0.08)}
.soft-focus:focus{outline:3px solid rgba(59,130,246,0.15);outline-offset:3px}

/* Avatar */
.avatar{width:80px;height:80px;border-radius:9999px;object-fit:cover;border:4px solid rgba(255,255,255,0.9);box-shadow:0 6px 18px rgba(16,24,40,0.08)}
.avatar-lg{width:120px;height:120px}

/* Headings and text */
.h1{font-size:2.5rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}
.h2{font-size:1.875rem;font-weight:700;color:#0f172a}
.muted{color:var(--muted)}
.small{font-size:.9rem}

/* Stats */
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}
@media(min-width:768px){.stats-grid{grid-template-columns:repeat(4,1fr)}}
.stat{background:transparent;text-align:center;padding:.75rem}
.stat .value{font-weight:700;font-size:1.5rem;color:var(--accent)}
.stat .label{font-size:.9rem;color:var(--muted)}

/* Org/pyramid layout tweaks */
.pyramid-wrapper{display:flex;flex-direction:column;align-items:center;gap:2.25rem;padding:1rem 0}
.org-node{position:relative}
.org-card{border-radius:12px;padding:1.25rem;text-align:center;background:linear-gradient(180deg,var(--card),#fbfdff);min-width:220px}
.org-card .name{font-weight:700;color:#0f172a;margin-top:.5rem}
.org-card .position{color:var(--muted);font-weight:600;text-transform:none;margin-bottom:.5rem}

/* Modal backdrop and content */
.modal-backdrop{background:rgba(2,6,23,0.55);position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:1rem;z-index:50}
.modal-content{background:var(--card);border-radius:14px;max-width:980px;width:100%;max-height:90vh;overflow:auto;box-shadow:0 30px 80px rgba(2,6,23,0.2)}

/* Small utilities */
.muted-text{color:var(--muted)}
.caps{letter-spacing:.6px;text-transform:uppercase}
.text-center{text-align:center}

/* Connection lines — subtle */
.connection-line{height:2px;background:linear-gradient(90deg,transparent,#E6EEF9,transparent);width:100%}

/* Responsive */
@media(max-width:768px){
  .avatar{width:72px;height:72px}
  .h1{font-size:1.6rem}
  .stats-grid{gap:.5rem} 
}

/* Reduced motion and accessibility */
@media(prefers-reduced-motion:reduce){
  *{animation-duration:1ms !important;transition-duration:1ms !important}
}

/* Preserve some helpful classes used across components */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.focus-visible:focus{outline:3px solid rgba(59,130,246,0.18);outline-offset:3px}

/* Keep subtle badge style */
.badge{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:600;background:var(--glass);color:var(--primary)}

/* small tweak for tree-line hover from previous file but muted */
.tree-line::before{content:'';position:absolute;top:50%;left:-16px;width:16px;height:1px;background:#EEF2FF}
.tree-line:hover::before{background:var(--accent);height:2px}

/* End of refined About.css */
/* Удалено: некорректная строка вне селектора */


.harvard-gradient {
  background: linear-gradient(135deg, #DC2626, #B91C1C);
}

/* Enhanced animation for Harvard theme */
@keyframes harvardPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(185, 28, 28, 0.7);
  }
  50% {
    box-shadow: 0 0 0 20px rgba(185, 28, 28, 0);
  }
}

.harvard-pulse {
  animation: harvardPulse 2s infinite;
}

/* Academic excellence indicators */
.excellence-badge {
  background: linear-gradient(45deg, #DC2626, #B91C1C);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 25px;
  font-weight: 600;
  font-size: 0.875rem;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.excellence-badge::before {
  content: "⭐";
  font-size: 1rem;
}

/* Timeline enhancements for Harvard */
.timeline-harvard .timeline-dot {
  background: linear-gradient(45deg, #DC2626, #B91C1C);
  box-shadow: 0 0 0 4px rgba(185, 28, 28, 0.2);
}

/* Research stats animation */
@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stats-counter {
  animation: countUp 0.8s ease-out forwards;
}

.stats-counter:nth-child(1) { animation-delay: 0.1s; }
.stats-counter:nth-child(2) { animation-delay: 0.3s; }
.stats-counter:nth-child(3) { animation-delay: 0.5s; }
.stats-counter:nth-child(4) { animation-delay: 0.7s; }

/* Responsive enhancements */
@media (max-width: 768px) {
  .timeline-item {
    flex-direction: column !important;
  }
  
  .timeline-item .w-1\2 {
    width: 100%;
    text-align: center !important;
  }
  
  .timeline-item .pr-8 {
    padding-right: 0;
  }
  
  .timeline-item .pl-8 {
    padding-left: 0;
  }
}

/* Management page specific styles */
.org-node {
  position: relative;
  overflow: visible;
}

.org-node::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, transparent, rgba(59, 130, 246, 0.1), transparent);
  border-radius: inherit;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: -1;
}

.org-node:hover::before {
  opacity: 1;
}

.org-node-expanded {
  transform: scale(1.01);
  z-index: 10;
}

.org-node-expanded::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(147, 197, 253, 0.1));
  border-radius: inherit;
  z-index: -1;
}

/* Interactive hover effects for staff cards */
.staff-card {
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.staff-card:hover {
  transform: translateY(-8px) rotate(1deg);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
}

.staff-card:hover .staff-avatar {
  transform: scale(1.1);
  box-shadow: 0 8px 16px rgba(59, 130, 246, 0.3);
}

.staff-avatar {
  transition: all 0.3s ease;
}

/* Animated search input */
.search-input {
  position: relative;
}

.search-input::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, #3B82F6, #1D4ED8);
  transition: all 0.3s ease;
  transform: translateX(-50%);
}

.search-input:focus-within::after {
  width: 100%;
}

/* Pulse animation for expand buttons */
@keyframes pulseBlue {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
  }
  50% {
    box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
  }
}

.expand-button {
  animation: pulseBlue 2s infinite;
}

/* Staggered reveal animation */
.stagger-item {
  opacity: 0;
  transform: translateY(30px);
  animation: staggerReveal 0.6s ease forwards;
}

.stagger-item:nth-child(1) { animation-delay: 0.1s; }
.stagger-item:nth-child(2) { animation-delay: 0.2s; }
.stagger-item:nth-child(3) { animation-delay: 0.3s; }
.stagger-item:nth-child(4) { animation-delay: 0.4s; }
.stagger-item:nth-child(5) { animation-delay: 0.5s; }

@keyframes staggerReveal {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Modal animations */
.modal-backdrop {
  animation: fadeIn 0.3s ease;
}

.modal-content {
  animation: modalSlideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(100px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Tree connection lines */
.tree-line {
  position: relative;
}

.tree-line::before {
  content: '';
  position: absolute;
  top: 50%;
  left: -20px;
  width: 20px;
  height: 1px;
  background: #E5E7EB;
  transition: all 0.3s ease;
}

.tree-line:hover::before {
  background: #3B82F6;
  height: 2px;
}

/* Loading skeleton animation */
@keyframes skeleton {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200px 100%;
  animation: skeleton 1.5s infinite linear;
}

/* Microinteractions */
.micro-bounce {
  transition: transform 0.1s ease;
}

.micro-bounce:active {
  transform: scale(0.95);
}

/* Enhanced tooltip */
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: #1F2937;
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 14px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s ease;
  z-index: 1000;
}

.tooltip::before {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(8px);
  border: 6px solid transparent;
  border-top-color: #1F2937;
  opacity: 0;
  transition: all 0.3s ease;
}

.tooltip:hover::after,
.tooltip:hover::before {
  opacity: 1;
}

/* Enhanced focus indicators for accessibility */
.focus-visible {
  outline: 2px solid #3B82F6;
  outline-offset: 2px;
  border-radius: 4px;
}

/* High contrast mode adjustments */
@media (prefers-contrast: high) {
  .org-node {
    border-width: 3px;
  }
  
  .staff-card {
    border-width: 2px;
  }
  
  .modal-content {
    border: 2px solid #000;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .org-node:hover {
    transform: none;
  }
  
  .staff-card:hover {
    transform: none;
  }
}

/* Print optimizations */
@media print {
  .org-node {
    break-inside: avoid;
    box-shadow: none !important;
  }
  
  .staff-card {
    break-inside: avoid;
    box-shadow: none !important;
  }
  
  .modal-backdrop,
  .modal-content {
    display: none !important;
  }
  
  .no-print {
    display: none !important;
  }
}

/* Dark mode support (future enhancement) */
@media (prefers-color-scheme: dark) {
  .org-node {
    background: linear-gradient(135deg, #374151, #4B5563);
    color: #F3F4F6;
  }
  
  .staff-card {
    background: linear-gradient(135deg, #374151, #4B5563);
    color: #F3F4F6;
    border-color: #6B7280;
  }
}

/* Pyramid organizational structure styles */
.pyramid-structure {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3rem;
  padding: 2rem 0;
}

.pyramid-level {
  display: flex;
  justify-content: center;
  gap: 2rem;
  width: 100%;
  position: relative;
}

.pyramid-level-1 {
  /* Ректор - 1 человек */
  max-width: 300px;
}

.pyramid-level-2 {
  /* Проректоры - 3 человека */
  max-width: 600px;
}

.pyramid-level-3 {
  /* Деканы - 3-4 человека в один ряд */
  max-width: 1200px;
  flex-wrap: nowrap;
}

.pyramid-level-4 {
  /* Зав. кафедрами - много */
  max-width: 1200px;
  flex-wrap: wrap;
}

/* Enhanced staff cards for pyramid */
.pyramid-staff-card {
  background: linear-gradient(135deg, #ffffff 0%, #f8faff 100%);
  border: 2px solid transparent;
  border-radius: 20px;
  padding: 2rem;
  text-align: center;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  position: relative;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  min-width: 220px;
  max-width: 280px;
  cursor: pointer;
}

.pyramid-staff-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
  transition: left 0.6s ease;
}

.pyramid-staff-card:hover::before {
  left: 100%;
}

.pyramid-staff-card:hover {
  transform: translateY(-10px) scale(1.02);
  box-shadow: 0 20px 60px rgba(59, 130, 246, 0.15);
  border-color: #3B82F6;
}

/* Level specific colors */
.pyramid-level-1 .pyramid-staff-card {
  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
  border-color: #fca5a5;
}

.pyramid-level-1 .pyramid-staff-card:hover {
  border-color: #dc2626;
  box-shadow: 0 20px 60px rgba(220, 38, 38, 0.15);
}

.pyramid-level-2 .pyramid-staff-card {
  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
  border-color: #93c5fd;
}

.pyramid-level-2 .pyramid-staff-card:hover {
  border-color: #2563eb;
  box-shadow: 0 20px 60px rgba(37, 99, 235, 0.15);
}

.pyramid-level-3 .pyramid-staff-card {
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  border-color: #86efac;
  max-width: 250px;
  min-width: 200px;
}

.pyramid-level-3 .pyramid-staff-card:hover {
  border-color: #059669;
  box-shadow: 0 20px 60px rgba(5, 150, 105, 0.15);
}

.pyramid-level-4 .pyramid-staff-card {
  background: linear-gradient(135deg, #fefce8 0%, #fef3c7 100%);
  border-color: #fde68a;
}

.pyramid-level-4 .pyramid-staff-card:hover {
  border-color: #d97706;
  box-shadow: 0 20px 60px rgba(217, 119, 6, 0.15);
}

/* Avatar styling for pyramid */
.pyramid-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  margin: 0 auto 1.5rem;
  border: 4px solid #ffffff;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  object-fit: cover;
}

.pyramid-staff-card:hover .pyramid-avatar {
  transform: scale(1.1);
  border-width: 6px;
}

/* Special styling for rector (level 1) */
.pyramid-level-1 .pyramid-avatar {
  width: 120px;
  height: 120px;
  border: 6px solid #dc2626;
  box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.2);
}

/* Connection lines between levels */
.pyramid-connections {
  position: absolute;
  top: -1.5rem;
  left: 0;
  right: 0;
  height: 3rem;
  z-index: -1;
}

.connection-line {
  position: absolute;
  height: 2px;
  background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
  top: 50%;
  transform: translateY(-50%);
  animation: connectionPulse 3s ease-in-out infinite;
}

@keyframes connectionPulse {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.8;
  }
}

/* Responsive pyramid layout */
@media (max-width: 1024px) and (min-width: 769px) {
  /* На планшетах деканы могут переноситься если не помещаются */
  .pyramid-level-3 {
    flex-wrap: wrap;
    justify-content: center;
  }
}

@media (max-width: 768px) {
  .pyramid-level {
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }
  
  /* На мобильных деканы могут переноситься */
  .pyramid-level-3 {
    flex-direction: row;
    flex-wrap: wrap;
    max-width: 100%;
    justify-content: center;
  }
  
  .pyramid-staff-card {
    min-width: 200px;
    max-width: 250px;
    padding: 1.5rem;
  }
  
  .pyramid-avatar {
    width: 80px;
    height: 80px;
  }
  
  .pyramid-level-1 .pyramid-avatar {
    width: 100px;
    height: 100px;
  }
}

/* Enhanced typography for pyramid */
.pyramid-name {
  font-size: 1.25rem;
  font-weight: 700;
  color: #1f2937;
  margin-bottom: 0.5rem;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.pyramid-position {
  font-size: 1rem;
  font-weight: 600;
  color: #6b7280;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.pyramid-experience {
  font-size: 0.875rem;
  color: #9ca3af;
  margin-bottom: 1rem;
}

/* Level badges */
.pyramid-level-badge {
  position: absolute;
  top: -10px;
  right: -10px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.1rem;
  color: white;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 10;
}

.pyramid-level-1 .pyramid-level-badge {
  background: linear-gradient(135deg, #dc2626, #b91c1c);
}

.pyramid-level-2 .pyramid-level-badge {
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
}

.pyramid-level-3 .pyramid-level-badge {
  background: linear-gradient(135deg, #059669, #047857);
}

.pyramid-level-4 .pyramid-level-badge {
  background: linear-gradient(135deg, #d97706, #b45309);
}

/* Animated level labels */
.pyramid-level-title {
  text-align: center;
  font-size: 1.5rem;
  font-weight: 700;
  color: #374151;
  margin-bottom: 2rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  padding-bottom: 1rem;
}

.pyramid-level-title::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #3b82f6, #1d4ed8);
  border-radius: 2px;
}

/* Leaflet Map Customization */
.leaflet-container {
  font-family: inherit;
}

.custom-marker {
  background: transparent !important;
  border: none !important;
}

.leaflet-popup-content-wrapper {
  border-radius: 12px !important;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important;
  padding: 0 !important;
}

.leaflet-popup-content {
  margin: 0 !important;
  border-radius: 12px;
  overflow: hidden;
}

.leaflet-popup-tip {
  box-shadow: none !important;
}

.leaflet-popup-close-button {
  display: none !important;
}

/* Custom popup styles */
.custom-popup .leaflet-popup-content-wrapper {
  background: white;
  color: #374151;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  border: 1px solid #e5e7eb;
}

.custom-popup .leaflet-popup-tip {
  background: white;
  border: 1px solid #e5e7eb;
  box-shadow: none;
}

/* Map controls styling */
.leaflet-control-zoom a {
  background-color: white !important;
  color: #374151 !important;
  border: 1px solid #d1d5db !important;
  border-radius: 6px !important;
}

.leaflet-control-zoom a:hover {
  background-color: #f9fafb !important;
  color: #111827 !important;
}

.leaflet-control-attribution {
  background: rgba(255, 255, 255, 0.8) !important;
  border-radius: 6px !important;
  font-size: 11px !important;
}
